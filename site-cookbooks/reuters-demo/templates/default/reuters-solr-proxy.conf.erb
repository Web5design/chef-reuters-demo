# Upstart script for Nodejs proxy server
# Generated by Chef for <%= node[:fqdn] %>
description "Node.js Hello World App"

start on filesystem and started networking
stop on shutdown

respawn

script
  cd <%= @dir %>
  echo $$ > reuters-solr-proxy.pid
  exec 2>> /var/log/upstart/reuters-err.log
  exec 1>> /var/log/upstart/reuters-access.log
  solr-security-proxy --port <%= @proxy_port %> --backend.port <%= @solr_port %>
end script

pre-stop script
  rm <%= @dir %>/reuters-solr-proxy.pid
end script
